# Amazon MWSから出品パートナーAPIへの移行ガイド

### 目次

- [概要](#概要)
- [出品パートナーAPIとは何ですか？](#出品パートナーAPIとは何ですか？)
   - [出品パートナーAPIの機能](#出品パートナーAPIの機能)
   - [Amazon MWSから出品パートナーAPIへのAPIのマッピング](#Amazon MWSから出品パートナーAPIへのAPIのマッピング)
- [チュートリアル： Amazon MWSアプリケーションの出品パートナーAPIアプリケーションへの変換](#チュートリアル： Amazon MWSアプリケーションの出品パートナーAPIアプリケーションへの変換)
- [出品パートナーAPIの役割](#出品パートナーAPIの役割)
- [制限データトークン](#制限データトークン)
- [出品パートナーAPIサンドボックス](#出品パートナーAPIサンドボックス)
- [その他のリソース](#その他のリソース)

# 概要
このドキュメントでは、出品パートナーAPIとは何か、AmazonマーケットプレイスWebサービス（Amazon MWS）との違い、Amazon MWSアプリケーションを出品パートナーAPIアプリケーションに変換する方法について説明します。

# 出品パートナーAPIとは何ですか？
出品パートナーAPIはRESETベースのAPIで、これによりAmazon出品パートナーは、出品、注文、支払い、レポートなどのデータにプログラムでアクセスできます。出品パートナーAPIは、Amazon MWSの最新化です。Amazon MWSで利用可能だったすべての機能が含まれています。今後開発されるすべての機能は、出品パートナーAPIのみで利用できます。

## 出品パートナーAPIの機能
すべての出品パートナーAPIには、SwaggerモデルとAPIリファレンスがあり、ユースケースガイドがあるものもあります。また、出品パートナーAPIへの呼び出しの認証に役立つクライアントライブラリーも含まれています。

出品パートナーAPIには、以下のような新機能が含まれています。
* JSON形式で入出力するRESTベース。
* すべてのリージョンでサポートされる新しいエンドポイント。
* SDKの自動生成について、「出品パートナーAPI開発者ガイド」で手順を説明。
* 個別のサンドボックスエンドポイントがあるサンドボックス機能で、モックデータを使用してテストが可能。
* 動的な使用プランで、さまざまな手段に基づいて各出品パートナーのレート制限を自動的に調整。
* 出品パートナーAPIアプリケーションは、すべてのリージョンで適用できます。
* 購入者の個人識別情報（PII）を保護するのに役立つ制限データトークンのサポート。

新規および更新された出品パートナーAPI：
* **AプラスコンテンツAPI。**出品パートナーがAプラスコンテンツを作成して編集できるようにします。
* **認証API。**既存のMWS認証トークンを出品パートナーAPI認証コードと交換します。
* **カタログアイテムAPI。**Amazonカタログに関する詳細を提供します。
* **FBA納品資格API。**フルフィルメント by Amazon（FBA）に参加できるASINの適格性をチェックし、不適格なASINの納品が作成されないようにします。
* **FBA在庫API。**FBA出品者向けの新機能がある、新規および更新のFBA在庫API。
* **FBA小型軽量商品API。**FBA小型軽量商品プログラムに対応します。
* **メッセージングAPI。**出品パートナーが、サポートされるメッセージタイプを購入者に送信できるようにします。
* **通知API。**ブランド商品コンテンツの変更、商品タイプ名の変更、MFN注文ステータスの変更、B2B出品の変更に関する新しい通知が含まれます。
* **価格設定API。**商品の価格設定とオファー情報を取得します。
* **商品手数料API。**商品について見積もり手数料を取得します。
* **販売API。**販売履歴レポートを生成します。
* **サービスAPI。** サービスプロバイダーがサービス注文の取得と変更ができるようにします。
* **配送API。**Amazonの配送サービスにプログラムでアクセスできます。
* **要請API。**出品パートナーが重要でない要請を購入者に送信できるようにします。
* **トークンAPI。**購入者の個人識別情報（PII）にアクセスするための安全な方法を提供します。

## Amazon MWSから出品パートナーAPIへのAPIのマッピング

| Amazon MWS | 出品パートナーAPI |
| ----------------------------------------- | ----------------------------------- |
| フィードAPIセクション | フィードAPI |
| 会計APIセクション | 会計API |
| フルフィルメント納品APIセクション | フルフィルメント納品API |
| フルフィルメント在庫APIセクション | FBA在庫API |
| フルフィルメント出荷APIセクション | フルフィルメント出荷API |
| 出品者出荷APIセクション | 出品者出荷API |
| 注文APIセクション | 注文API |
| 商品APIセクション - 商品手数料 | 商品手数料API |
| 商品APIセクション - 商品の出品 | カタログアイテムAPI |
| 商品APIセクション - 商品の価格設定 | 価格設定API |
| レコメンドAPIセクション | *出品パートナーAPIでは廃止* |
| レポートAPIセクション | レポートAPI |
| 出品者APIセクション | 出品者API |
| サブスクリプションAPIセクション | 通知API |

# チュートリアル： Amazon MWSアプリケーションの、出品パートナーAPIアプリケーションへの変換

このチュートリアルでは、Amazon MWSアプリケーションを出品パートナーAPIアプリケーションに変換する方法について説明します。

**前提条件**

- Amazon MWSアプリケーションを登録し、マーケットプレイスアプリストアで公開済みです。

**手順**

[ステップ1.出品パートナーAPIアプリケーションに必要なデータアクセスをリクエストする](#ステップ1.出品パートナーAPIアプリケーションに必要なデータアクセスをリクエストする)

[ステップ2.IAM ARNを作成して設定する](#ステップ2.IAM ARNを作成して設定する)

[ステップ3.Amazon MWSアプリケーションを出品パートナーAPIハイブリッドアプリケーションに変換する](#ステップ3.Amazon MWSアプリケーションを出品パートナーAPIハイブリッドアプリケーションに変換する)

[ステップ4.認可ワークフローを実装する](#ステップ4.認可ワークフローを実装する)

[ステップ5.出品パートナーAPIに接続する](#ステップ5.出品パートナーAPIに接続する)

[ステップ6.出品パートナーハイブリッドアプリケーションをマーケットプレイスアプリストアで公開する](#ステップ6.出品パートナーハイブリッドアプリケーションをマーケットプレイスアプリストアで公開する)

[ステップ7.Amazon MWS認可を出品パートナーAPI認可に移行する](#ステップ7.Amazon MWS認可を出品パートナーAPI認可に移行する)

[ステップ8.Amazon MWS呼び出しを出品パートナーAPI呼び出しに移行する](#ステップ8.Amazon MWS呼び出しを出品パートナーAPI呼び出しに移行する)

## ステップ1.出品パートナーAPIアプリケーションに必要なデータアクセスをリクエストする

1. Amazon MWS開発者アカウントに関連付けられている認証情報を使用して、セラーセントラルにサインインします。

1. **アプリとサービス**メニューの**アプリの開発**をクリックします。

   **デベロッパーセントラル**ページが表示されます。

1. **デベロッパーセントラル**ページで、**開発者プロファイル**リンクをクリックします。

   **開発者プロファイルページ**が表示されます。

1. フォームの**データアクセス**セクションで、アプリケーションに必要な役割を選択し、フォームを送信します。

お問い合わせチケットが開かれて、このリクエストが追跡されます。リクエストの評価後に、ご連絡します。これには数日かかる場合があります。

## ステップ2.IAM ARNを作成して設定する
「出品パートナーAPI開発者ガイド」の[IAMポリシーとエンティティの作成と設定](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/developer-guide/SellingPartnerApiDeveloperGuide.md#Creating-and-configuring-IAM-policies-and-entities)の手順に従って、以下のステップで使用するIAM ARNを作成して設定します。

## ステップ3.Amazon MWSアプリケーションを出品パートナーAPIハイブリッドアプリケーションに変換する

1. 開発者登録に使用した認証情報で、セラーセントラルにサインインします。

1. **アプリとサービス**メニューの**アプリの開発**をクリックします。

   **デベロッパーセントラル**ページが表示されます。

1. Amazon MWSアプリケーションの横にある**アプリの編集**メニューで、**アプリの編集**をクリックします。

1. 指示に従ってアプリケーションを登録します。**IAM ARN**ボックスで、[ステップ2.IAM ARNを作成して設定する](#ステップ2.IAM ARNを作成して設定する)のIAM ARNを使用します。

このフォームに入力すると、出品パートナーAPIハイブリッドアプリケーションがドラフトステータスになります。これで、次のステップで認可ワークフローを設定してテストする準備ができました。

## ステップ4.認可ワークフローを実装する

出品パートナーAPIハイブリッドアプリケーションの認可ワークフローを設定してテストします。詳しくは、「出品パートナーAPI開発者ガイド」の[出品パートナーAPIアプリケーションの認可](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/developer-guide/SellingPartnerApiDeveloperGuide.md#authorizing-selling-partner-api-applications)をご覧ください。認可ワークフローのテストが完了したら、テストの認可ワークフローを実稼働の認可ワークフローに変換してください。

## ステップ5.出品パートナーAPIに接続する

出品パートナーAPIでオペレーションを呼び出すためのワークフローを設定します。これには、LWAトークンの交換、URIの作成、ヘッダーの追加、リクエストの作成と署名が含まれます。これを行う最も簡単な方法は、LWAトークンの交換と認証を含むSDKを生成して使用することです。詳しくは、「出品パートナーAPI開発者ガイド」の[LWAトークンの交換と認証を備えたJava SDKの生成](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/developer-guide/SellingPartnerApiDeveloperGuide.md#generating-a-java-sdk-with-lwa-token-exchange-and-authentication)および[生成されたJava SDKを使用した出品パートナーAPIへの接続](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/developer-guide/SellingPartnerApiDeveloperGuide.md#connecting-to-the-selling-partner-api-using-a-generated-java-sdk)を参照してください。

出品パートナーAPIサンドボックスへの接続については、「出品パートナーAPI開発者ガイド」の[出品パートナーAPIサンドボックス](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/developer-guide/SellingPartnerApiDeveloperGuide.md#the-selling-partner-api-sandbox)を参照してください。

## ステップ6.出品パートナーハイブリッドアプリケーションをマーケットプレイスアプリストアで公開する

1. 開発者登録に使用した認証情報で、セラーセントラルにサインインします。

1. **アプリとサービス**メニューの**アプリの開発**をクリックします。

   **デベロッパーセントラル**ページが表示されます。

1. アプリケーションの横にある**アプリの編集**メニューで矢印をクリックし、**出品情報を編集**をクリックします。

1. ワークフローを進みます。

最終画面が完了すると、この出品パートナーハイブリッドアプリケーションがマーケットプレイスアプリストアで公開されます。このプロセスは5～10営業日かかります。

## ステップ7.Amazon MWS認可を出品パートナーAPI認可に移行する

既存のAmazon MWS認可を出品パートナーAPI認可に移行します。詳しくは、[認証APIユースケースガイド](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/use-case-guides/authorization-api-use-case-guide/authorization-api-use-case-guide-v1.md)をご覧ください。

## ステップ8.Amazon MWS呼び出しを出品パートナーAPI呼び出しに移行する

この最後のステップでは、以前にAmazon MWSオペレーションの呼び出しをトリガーしたアクションが、対応する出品パートナーAPIオペレーションの呼び出しをトリガーするように、アプリケーションを更新します。アプリケーションが以前に呼び出したAmazon MWSオペレーションに対応する出品パートナーAPIオペレーションを確認するには、[Amazon MWSから出品パートナーAPIへのAPIのマッピング](#Amazon MWSから出品パートナーAPIへのAPIのマッピング)を参照してください。

# 出品パートナーAPIの役割

役割は、開発者またはアプリケーションがオペレーションやリソースのアクセス権を持つかどうかを判断するために、出品パートナーAPIで使用されるメカニズムです。開発者は、特定の役割をリクエストして取得する必要があります。役割を持っていないと、その役割の管理下にあるオペレーションやリソースのグループにアクセスできません。

出品パートナーAPIの役割は、Amazon MWSの役割よりもきめ細かくなっています。Amazon MWSには3つの役割がありましたが、出品パートナーAPIには11の役割があります。出品パートナーAPIの役割の詳細と、役割とその定義一覧については、[出品パートナーAPIの役割](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/roles/Roles-in-the-Selling-Partner-API.md)を参照してください。

# 制限データトークン

出品パートナーAPIは、制限付きオペレーション（制限データを返すオペレーション）を呼び出して制限データトークン（RDT）を要求することにより、購入者の個人識別情報（PII）を保護します。制限付きオペレーションを呼び出すRDTの取得と使用については、[トークンAPIユースケースガイド](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/use-case-guides/tokens-api-use-case-guide/tokens-API-use-case-guide-2021-03-01.md)を参照してください。

# 出品パートナーAPIサンドボックス
出品パートナーAPIでは、実稼動データに影響を与えたり、実際のイベントを発生させたりすることなく、アプリケーションをテストできるサンドボックス環境が提供されます。詳しくは、「出品パートナーAPI開発者ガイド」の[出品パートナーAPIサンドボックス](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/developer-guide/SellingPartnerApiDeveloperGuide.md#the-selling-partner-api-sandbox)を参照してください。

# その他のリソース
* [GitHubの問題](https://github.com/amzn/selling-partner-api-docs/issues)
* セラーセントラルで[ケース](https://sellercentral.amazon.com/cu/case-lobby?ref=xx_caseLog_xxxx_helphub&)をオープンしてサポートに問い合わせてください。
* [出品パートナーAPI開発者ガイド](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/developer-guide/SellingPartnerApiDeveloperGuide.md)
