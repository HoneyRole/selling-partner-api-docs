# 亚马逊 MWS 到销售伙伴 API 的迁移指南

### 目录

- [概述](#概述)
- [什么是销售伙伴 API？](#什么是销售伙伴-api)
   - [销售伙伴 API 的功能](#销售伙伴-api-的功能)
   - [从亚马逊 MWS 的 API 映射到销售伙伴 API](#从亚马逊-mws-的-api-映射到销售伙伴-api)
- [教程： 将亚马逊 MWS 应用程序转换为销售伙伴 API 应用程序](#教程-将亚马逊-mws-应用程序转换为销售伙伴-api-应用程序)
- [销售伙伴 API 中的职权](#销售伙伴-api-中的职权)
- [受限数据令牌](#受限数据令牌)
- [销售伙伴 API 沙箱](#销售伙伴-api-沙箱)
- [其他资源](#其他资源)

# 概述
本文解释了什么是销售伙伴 API 及其与亚马逊商城网络服务（亚马逊 MWS）有何不同，并向您展示如何将亚马逊 MWS 应用程序转换为销售伙伴 API 应用程序。

# 什么是销售伙伴 API？
销售伙伴 API 是一个基于 REST 的 API，可以帮助亚马逊销售伙伴以编程方式访问他们有关商品、订单、付款、报告等的数据。销售伙伴 API 是亚马逊 MWS 的现代化版本，涵盖以前可从亚马逊 MWS 获得的所有功能。未来的所有开发工作都将仅面向销售伙伴 API。

## 销售伙伴 API 的功能
每个销售伙伴 API 都有一个 Swagger 模型和一个 API 参考，在某些情况下，还有一份用例指南。还包括客户端库，用来帮助对销售伙伴 API 的调用进行身份验证。

销售伙伴 API 的一些新功能包括：
* 基于 REST 以及 JSON 格式的输入和输出。
* 所有区域都支持的新 EndPoints。
* 销售伙伴 API 开发者指南中有关自动生成 SDK 的分步说明。
* 具有单独沙箱 EndPoints 的沙盒功能，用于使用模拟数据进行测试。
* 动态使用方案，根据各种措施自动调整每个销售伙伴的费率限制。
* 销售伙伴 API 应用程序适用于所有区域。
* 支持受限数据令牌，这种令牌可帮助保护客户的个人身份信息 (PII)。

全新的和更新后的销售伙伴 API：
* **A+ 内容 API。** 支持销售伙伴创建和编辑 A+ 内容。
* **授权 API。** 将现有的 MWS 身份验证令牌交换为销售伙伴 API 授权码。
* **目录商品 API。** 提供有关亚马逊目录的详细信息。
* **亚马逊物流入库资格 API。** 检查 ASIN 是否符合加入亚马逊物流 (FBA) 的要求，避免为不符合要求的 ASIN 创建入库货件。
* **亚马逊物流库存 API。** 全新改进后的亚马逊物流库存 API，提供了面向亚马逊物流卖家的新功能。
* **亚马逊物流轻小商品计划 API。** 支持亚马逊物流轻小商品计划。
* **消息 API。** 使销售伙伴能够向客户发送支持的消息类型。
* **通知 API。** 包括有关品牌商品内容更改、商品类型名称更改、卖家自配送订单状态更改和 B2B 商品更改的新通知。
* **定价 API。** 获取商品定价和报价信息。
* **商品费用 API。** 获取商品的预计费用。
* **销售 API。** 生成销售历史记录报告。
* **服务 API。** 支持服务提供商获取和修改其服务订单。
* **配送 API。** 提供以编程方式访问亚马逊配送服务的方式。
* **征求服务 API。** 使销售伙伴能够向客户发送非关键性征求服务。
* **令牌 API。** 提供访问客户的个人身份信息 (PII) 的安全方法。

## 从亚马逊 MWS 的 API 映射到销售伙伴 API

| 亚马逊 MWS | 销售伙伴 API |
| ----------------------------------------- | ----------------------------------- |
| 上传数据 API 部分 | 上传数据 API |
| 财务 API 部分 | 财务 API |
| 亚马逊物流入库货件 API 部分 | 亚马逊物流入库 API |
| 配送库存 API 部分 | 亚马逊物流库存 API |
| 亚马逊物流出库货件 API 部分 | 亚马逊物流出库 API |
| 卖家配送 API 部分 | 卖家配送 API |
| 订单 API 部分 | 订单 API |
| 商品 API 部分 - 商品费用 | 商品费用 API |
| 商品 API 部分 - 商品信息 | 目录商品 API |
| 商品 API 部分 - 商品定价 | 定价 API |
| 销售指导 API 部分 | *已在销售伙伴 API 中弃用* |
| 报告 API 部分 | 报告 API |
| 卖家 API 部分 | 卖家 API |
| 订阅 API 部分 | 通知 API |

# 教程： 将亚马逊 MWS 应用程序转换为销售伙伴 API 应用程序

本教程为您讲解如何将亚马逊 MWS 应用程序转换为销售伙伴 API 应用程序。

**先决条件**

- 您已注册亚马逊 MWS 应用程序并在商城应用程序商店中发布。

**步骤**

[步骤 1.请求销售伙伴 API 应用程序所需的数据访问权限](#步骤-1请求销售伙伴-api-应用程序所需的数据访问权限)

[步骤 2.创建和配置 IAM ARN](#步骤-2创建和配置-iam-arn)

[步骤 3.将您的亚马逊 MWS 应用程序转换为混合销售伙伴 API 应用程序](#步骤-3将您的亚马逊-mws-应用程序转换为混合销售伙伴-api-应用程序)

[步骤 4.实施授权工作流程](#步骤-4实施授权工作流程)

[步骤 5.连接到销售伙伴 API](#步骤-5连接到销售伙伴-api)

[步骤 6.在商城应用程序商店中发布混合销售伙伴应用程序](#步骤-6在商城应用程序商店中发布混合销售伙伴应用程序)

[步骤 7.将亚马逊 MWS 授权迁移到销售伙伴 API 授权](#步骤-7将亚马逊-mws-授权迁移到销售伙伴-api-授权)

[步骤 8.将您的亚马逊 MWS 调用迁移到销售伙伴 API 调用](#步骤-8将您的亚马逊-mws-调用迁移到销售伙伴-api-调用)

## 步骤 1.请求销售伙伴 API 应用程序所需的数据访问权限

1. 使用与您的亚马逊 MWS 开发者帐户关联的凭据登录卖家平台。

1. 在**应用程序和服务**菜单中，单击**开发应用程序**。

   此时将显示**开发者平台**页面。

1. 在**开发者平台**页面上，单击**您的开发者资料**链接。

   此时将显示**“开发者资料”页面**。

1. 在表格的**数据访问**部分中，选择应用程序所需的职权并提交表格。

我们将开一个“联系我们”的 TT，供您追踪此请求。我们将在评估您的请求后与您联系；这可能需要几天时间。

## 步骤 2.创建和配置 IAM ARN
按照销售伙伴 API 开发者指南的[创建和配置 IAM 策略和实体](https://github.com/amzn/selling-partner-api-docs/tree/main/guides/zh-CN/developer-guide)中的步骤创建和配置 IAM ARN，以便在下一步中使用。

## 步骤 3.将您的亚马逊 MWS 应用程序转换为混合销售伙伴 API 应用程序

1. 使用您用于注册成为开发者的凭据登录卖家平台。

1. 在**应用程序和服务**菜单中，单击**开发应用程序**。

   此时将显示**开发者平台**页面。

1. 在您的亚马逊 MWS 应用程序旁边的**编辑应用程序**菜单上，单击**编辑应用程序**。

1. 按照说明注册您的应用程序。在 **IAM ARN** 框中，使用[步骤 2.创建和配置 IAM ARN](#步骤-2创建和配置-iam-arn) 中的 IAM ARN。

填写表格后，您的混合销售伙伴 API 应用程序将处于草稿状态。现在，您可以在下一步中设置和测试授权工作流程。

## 步骤 4.实施授权工作流程

为混合销售伙伴 API 应用程序设置和测试授权工作流程。有关更多信息，请参阅销售伙伴 API 开发者指南中的[授权销售伙伴 API 应用程序](https://github.com/amzn/selling-partner-api-docs/tree/main/guides/zh-CN/developer-guides)。完成对授权工作流程的测试后，务必将测试授权工作流程转换为生产授权工作流程。

## 步骤 5。连接到销售伙伴 API

在销售伙伴 API 中设置调用操作工作流程。这包括交换 LWA 令牌、构建 URI、添加标头以及创建和签署请求。要做到这一点，最简单的方法是生成和使用包括 LWA 令牌交换和身份验证的 SDK。有关更多信息，请参阅销售伙伴 API 开发者指南中的[通过 LWA 令牌交换和身份验证生成 Java SDK](https://github.com/amzn/selling-partner-api-docs/tree/main/guides/zh-CN/developer-guide) 以及[使用生成的 Java SDK 连接到销售伙伴 API](https://github.com/amzn/selling-partner-api-docs/tree/main/guides/zh-CN/developer-guide)。

有关连接到销售伙伴 API 沙箱的信息，请参阅销售伙伴 API 开发者指南中的[销售伙伴 API 沙箱](https://github.com/amzn/selling-partner-api-docs/tree/main/guides/zh-CN/developer-guide)。

## 步骤 6.在商城应用程序商店中发布混合销售伙伴应用程序

1. 使用您用于注册成为开发者的凭据登录卖家平台。

1. 在**应用程序和服务**菜单中，单击**开发应用程序**。

   此时将显示**开发者平台**页面。

1. 在应用程序旁边的**编辑应用程序**菜单中，单击箭头，然后单击**编辑商品信息**。

1. 继续进行工作流程。

完成最后一个屏幕的操作后，混合销售伙伴应用程序即发布到商城应用程序商店。此过程可能需要 5 至 10 个工作日。

## 步骤 7.将亚马逊 MWS 授权迁移到销售伙伴 API 授权

将您现有的亚马逊 MWS 授权迁移到销售伙伴 API 授权。有关更多信息，请参阅[授权 API 用例指南](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/use-case-guides/authorization-api-use-case-guide/authorization-api-use-case-guide-v1.md)。

## 步骤 8.将您的亚马逊 MWS 调用迁移到销售伙伴 API 调用

最后一步是更新您的应用程序，以便之前那些触发对亚马逊 MWS 操作的调用的操作，在此时触发对相应销售伙伴 API 操作的调用。请参阅[从亚马逊 MWS 的 API 映射到销售伙伴 API](#从亚马逊-mws-的-api-映射到销售伙伴-api)，了解哪些销售伙伴 API 操作与您的应用程序调用的亚马逊 MWS 操作相对应。

# 销售伙伴 API 中的职权

职权是销售伙伴 API 用于确定开发者或应用程序是否有权访问操作或资源的一种机制。如果是开发者，您必须请求特定职权并获取相应资格，否则您将无法访问该职权下分组的操作和资源。

销售伙伴 API 中的职权比亚马逊 MWS 中的职权更精细。如果亚马逊 MWS 有 3 个职权，销售伙伴 API 就有 11 个职权。有关销售伙伴 API 的职权的详细说明以及职权及其定义的列表，请参阅销售伙伴 API 中的[职权](https://github.com/amzn/selling-partner-api-docs/tree/main/guides/zh-CN/roles)。

# 受限数据令牌

销售伙伴 API 要求使用受限数据令牌 (RDT) 调用受限操作（返回受限数据的操作），从而保护客户的个人身份信息 (PII)。有关获取和使用 RDT 调用受限操作的信息，请参阅[令牌 API 用例指南](https://github.com/amzn/selling-partner-api-docs/tree/main/guides/zh-CN/use-case-guides/tokens-api-use-case-guide)

# 销售伙伴 API 沙箱
销售伙伴 API 提供了一个沙箱环境，允许您在不影响生产数据或触发真实情况下测试应用程序。有关更多信息，请参阅销售伙伴 API 开发者指南中的[销售伙伴 API 沙盒](https://github.com/amzn/selling-partner-api-docs/tree/main/guides/zh-CN/developer-guide)。

# 其他资源
* [GitHub 问题](https://github.com/amzn/selling-partner-api-docs/issues)
* 通过在卖家平台中打开 [case](https://sellercentral.amazon.com/cu/case-lobby?ref=xx_caseLog_xxxx_helphub&) 联系支持团队
* [销售伙伴 API 开发者指南](https://github.com/amzn/selling-partner-api-docs/blob/main/guides/en-US/developer-guide/SellingPartnerApiDeveloperGuide.md)
